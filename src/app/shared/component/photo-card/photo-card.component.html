<!-- 写真コンポーネント -->
<ul class="collection" *ngIf="photo">
  <li class="collection-item avatar row">
    <a [routerLink]="['/', photo.account.loginId]"><img appAccountImage [src]="photo.account.imgUrl"
        [alt]="photo.account.loginId" class="circle"></a>
    <p class="title row" *ngIf="hasInputComment">
      {{photo.account.loginId}}
      <a class="modal-trigger grey-text text-darken-2" href="javascript:void(0);" data-target="menu-modal">
        <i class="material-icons right">more_horiz</i>
      </a>
    </p>
    <p class="caption">{{photo.caption}}&nbsp;<span class="grey-text right">{{photo.createdAt | pastDate}}</span></p>
  </li>
  <li class="collection-item center">
    <ng-container *ngIf="hasInputComment">
      <img src="{{photo.imgUrl}}" class="photo responsive-img" alt="{{photo.caption}}">
      <div class="cover"></div>
    </ng-container>
    <ng-container *ngIf="!hasInputComment">
      <a [routerLink]="['/photo/', photo.cd]">
        <img src="{{photo.imgUrl}}" class="photo-list responsive-img" alt="{{photo.caption}}">
        <span class="cover"></span>
      </a>
    </ng-container>
  </li>
  <li class="collection-item" *ngIf="hasInputComment">
    <div>
      <a class="pink-text" href="javascript:void(0);" (click)="like()">
        <i *ngIf="photo.isLike" class="material-icons">favorite</i>
        <i *ngIf="!photo.isLike" class="material-icons">favorite_border</i>
      </a>
      <a class="pink-text" href="javascript:void(0);" (click)="focusComment()">
        <i class="material-icons">chat_bubble_outline</i></a>
      <a class="modal-trigger pink-text" href="javascript:void(0);" data-target="share-modal">
        <i class="material-icons">share</i></a>
      <a class="pink-text right"><i class="material-icons">bookmark_border</i></a>
    </div>
    <div *ngIf="photo.likeCount">いいね！{{photo.likeCount}}件</div>
  </li>
  <li class="collection-item row" *ngIf="hasInputComment && authenticated">
    <form [formGroup]="form" (ngSubmit)="onSubmit(form.value, form.valid)">
      <span class="col s7 m8 l9">
        <input type="text" class="validate" id="content" name="content" placeholder="コメントする" formControlName="content"
          required maxlength="120" data-length="120">
      </span>
      <span class="col s5 m4 l3">
        <button class="btn waves-effect waves-light right pink accent-2" type="submit"
          [disabled]="!form.valid">コメントする</button>
      </span>
    </form>
  </li>
  <li class="collection-item row" *ngIf="hasInputComment && photo.comments && photo.comments.length > 0">
    <ul class="comments">
      <li class="row" *ngFor="let comment of photo.comments; let i = index"><span class="col"><a
            [routerLink]="['/', comment.account.loginId]">@{{comment.account.loginId}}</a></span><span
          class="col">{{comment.content}}</span>
        <span class="col right">
          <a class="pink-text" href="javascript:void(0);" (click)="likeComment(i)">
            <i *ngIf="comment.isLike" class="material-icons">favorite</i>
            <i *ngIf="!comment.isLike" class="material-icons">favorite_border</i>
          </a>
        </span>
      </li>
    </ul>
  </li>
</ul>

<!-- 詳細メニューモーダル -->
<app-photo-card-menu *ngIf="photo" [photo]="photo"></app-photo-card-menu>

<!-- シェアモーダル -->
<app-share-modal></app-share-modal>