<section class="section animated fadeIn">
  <div class="row" *ngIf="account">
    <div class="col s3">
      <img [src]="account.imgUrl" [alt]="account.loginId" class="avatar circle responsive-img">
    </div>
    <div class="col s9">
      <h3 class="h5 left">{{account.name}}</h3>
      <ng-container *ngIf="!isMe">
        <button *ngIf="account.isFollow"
          class="btn follow-btn waves-effect waves-light left grey-text grey lighten-5 modal-trigger"
          data-target="unfollow-modal">フォロー中</button>
        <button *ngIf="!account.isFollow" class="btn follow-btn waves-effect waves-light left pink accent-2"
          (click)="follow()">フォローする</button>
      </ng-container>
    </div>
    <div class="col s9">
      <h2 class="h6 grey-text">@{{account.loginId}}</h2>
      <a *ngIf="isMe" class="waves-effect waves-light btn-small right pink accent-2"
        routerLink="/setting/profile">プロフィール編集</a>
      <p>
        <a *ngIf="account.twitter" href="https://twitter.com/{{account.twitter}}" target="_blank" rel="noopener">
          <img src="https://www.google.com/s2/favicons?domain=twitter.com" alt="twitter" width="16" height="16">
        </a>
        <img src="https://www.google.com/s2/favicons?domain=www.facebook.com" alt="facebook" width="16" height="16">
        <img src="https://www.google.com/s2/favicons?domain=www.instagram.com" alt="instagram" width="16" height="16">
      </p>
      <p>{{account.description}}</p>
    </div>
  </div>
  <div class="row">
    <div class="col s12">
      <ul class="tabs">
        <li class="tab col s3">
          <a class="active" href="account#post" title="投稿({{postCount}})">投稿({{postCount}})</a>
        </li>
        <li class="tab col s3" [ngClass]="{disabled: (followingCount === 0)}">
          <a href="account#following" title="フォロー({{followingCount}})">フォロー({{followingCount}})</a>
        </li>
        <li class="tab col s3" [ngClass]="{disabled: (followersCount === 0)}">
          <a href="account#followers" title="フォローワー({{followersCount}})">フォローワー({{followersCount}})</a></li>
      </ul>
    </div>

    <!-- 投稿 -->
    <div id="post" class="col s12">
      <app-account-post *ngIf="account" [loginId]="account.loginId" (postCount)="postCount=$event"></app-account-post>
    </div>

    <!-- フォロー -->
    <div id="following" class="col s12" style="display:none;">
      <app-account-following *ngIf="account" [loginId]="account.loginId" (followingCount)="followingCount=$event">
      </app-account-following>
    </div>

    <!-- フォローワー -->
    <div id="followers" class="col s12" style="display:none;">
      <app-account-followers *ngIf="account" [loginId]="account.loginId" (followersCount)="followersCount=$event">
      </app-account-followers>
    </div>
  </div>
</section>

<!-- フォロー解除確認モーダル -->
<div id="unfollow-modal" class="modal">
  <div class="modal-content">
    <h4 class="h6">@{{account.loginId}}さんのフォローをやめますか？</h4>
    <div class="row">
      <div class="col offset-s4 s3">
        <img [src]="account.imgUrl" [alt]="account.loginId" class="avatar circle responsive-img">
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <a href="javascript:void(0)" (click)="unfollow()" class="waves-effect waves-light btn-flat red-text">フォローをやめる</a>
    <a href="javascript:void(0)" class="modal-close waves-effect waves-light btn-flat">キャンセル</a>
  </div>
</div>

<app-my-adsense></app-my-adsense>